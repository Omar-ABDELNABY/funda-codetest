# Funda Backend Assignment  

This repository contains my implementation of the backend assignment for the **Backend Developer position at Funda**.  

The assignment was to determine:  
1. The top 10 *makelaars* (real estate agents) in Amsterdam with the most listings.  
2. The top 10 *makelaars* in Amsterdam with the most listings that have a *tuin* (garden).  

Both results are presented in tables (see screenshots in the [Results](#results) section).  

---

## 🏗️ Architecture Choice  

I chose **Onion Architecture** for this solution.  
- This pattern enforces **separation of concerns** and makes the system more maintainable, testable, and extensible.  
- Domain business logic remains independent from external dependencies.  

---

## 🔑 API Usage  

I used the **JSON API** format instead of XML because:  
- JSON is easier to parse and manipulate in modern programming languages.  
- Familiarity and tooling support are better for JSON compared to XML.  

---

## ⏱️ Throttling Logic  

The Funda API has request limits (>100 requests per minute are rejected).  
My approach to throttling evolved as follows:  

1. **Initial Idea (AI-assisted):** Add a fixed delay between requests.  
2. **Polly Exploration:** I checked if [Polly](https://github.com/App-vNext/Polly) could handle retries and throttling.  
   - The first attempt rejected requests after the throttle limit.  
   - Options suggested:  
     - Adding a wait strategy.  
     - Using semaphores for concurrency control.  
3. **Final Choice:** I picked **semaphores** because they provided a **simple and effective mechanism** to control concurrent requests while staying within API limits.  

---

## 🤖 AI Usage Transparency  

As per the assignment’s requirement, here’s where I used AI (ChatGPT) in my workflow:  

- **Throttling logic** – Guidance on strategies and implementation (Polly vs semaphore).  
- **Frontend implementation** – Generating the tables, since my frontend knowledge was rusty.  
- **Code snippets** – Small utility code (e.g., `DelegatingHandler`) that I didn’t recall at the moment. 
- **Readme** – Used it to provide a draft for this readme

I used AI mainly as a **pair-programming assistant** to speed up repetitive tasks and validate approaches. Final decisions and implementations were made with care.  

---

## 📊 Results  

The final results are displayed in simple tables (generated by the frontend):  

- **Top 10 Brokers in Amsterdam:**  
  ![Top brokers](docs/Top%20brokers.png)  

- **Top 10 Brokers in Amsterdam (with garden):**  
  ![Top brokers with garden](docs/Top%20brokers%20with%20garden.png)  
